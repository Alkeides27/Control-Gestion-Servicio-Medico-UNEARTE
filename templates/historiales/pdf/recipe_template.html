{% load static %}
<!DOCTYPE html>
<html lang="es" style="height: 100%;">
<head>
    <meta charset="UTF-8">
    <title>Récipe Médico</title>
    <style>
        /* La directiva @page se define en la vista (views.py) */
        
        body { 
            font-family: 'Helvetica', Arial, sans-serif; 
            font-size: 10pt; 
            color: #000;
            margin: 0;
            padding: 0;
            min-height: 100%; 
            display: flex;
            flex-direction: column;
        }

        .header-logos {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            line-height: 1.3;
            margin-bottom: 10px;
            position: relative; /* permite posicionado absoluto si lo necesitas */
            padding-top: 6px;
        }
        .header-logos .logo-left img { 
            max-width: 130px;
            max-height: 100px; 
        }

        .header-logos .header-right { 
            text-align: right; 
            font-size: 9pt;
            /* mantiene el flujo para el título debajo del cintillo */
        }

        /* Cintillo colocado en la columna derecha */
        .header-logos .header-right .header-cintillo {
            display: block;
            margin: 0 0 6px auto; /* empuja a la derecha */
            max-width: 300px;     /* ajustar según convenga */
        }
        .header-logos .header-right .header-cintillo img {
            width: 300px;
            height: 70px;
            display: block;
        }

        .header-logos .header-right h4 { 
            margin: 0; 
            font-size: 1.1em; 
            font-weight: bold;
        }

        .content { 
            margin-top: 10px; 
            border: 1px solid #000; 
            padding: 10px; 
            
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        .patient-info { 
            display: flex; 
            justify-content: space-between; 
            flex-wrap: wrap; 
            margin-bottom: 15px; 
            font-size: 9pt;
            flex-shrink: 0; 
        }
        .patient-info .data-field { 
            border-bottom: 1px #333; 
            padding: 0 5px;
            width: 60%; 
        }
         .patient-info .data-field-small {
            border-bottom: 1px #333; 
            padding: 0 5px;
            width: 35%;
         }

        .recipe-body { 
            line-height: 1.6; 
            margin-top: 20px;
            
            flex-grow: 1; 
            display: flex;
            flex-direction: column;
        }
        .recipe-body h5 { 
            margin: 5px 0 10px 0; 
            font-weight: bold; 
            text-align: center; 
        }
        
        .signature { 
            width: 45%; 
            text-align: center; 
            align-self: center; 
            /* Se añade 'margin-top: auto' para empujarlo al fondo 
               del '.recipe-body' después de que el texto crezca.
            */
            margin-top: auto;
            padding-top: 20px; /* Un poco de espacio sobre la línea */
        }
        .signature .line { 
            border-top: 1px solid #333; 
            width: 90%; 
            margin: 0 auto; 
        }
        .signature p { 
            margin: 5px 0 0 0; 
            font-size: 9pt; 
            font-weight: bold; 
        }

        .line-box { 
            border-top: 1px solid #333; 
            width: 100%;  
        }


        .footer { 
            margin-top: auto;
            padding-top: 10px;
            width: 100%;
            flex-shrink: 0; 
        }
        .footer .address { 
            font-size: 8pt; 
            width: 100%; 
            line-height: 1.2; 
            text-align: center; 
        }
    </style>
</head>
<body style="min-height: 100%;">

    <div class="header-logos">
        <div class="logo-left">
            <img src="{% static 'img/UNEARTE-LOGO-PDF.png' %}" alt="Logo UNEARTE">
        </div>
        <div class="header-right">
            <!-- MOVIDO: cintillo dentro de la columna derecha -->
            <span class="header-cintillo">
                <img src="{% static 'img/CINTILLO-INSTITUCIONAL-PDF.png' %}" alt="Cintillo">
            </span>
            <h4>Servicio de Salud Integral.</h4>
        </div>
    </div>

    <div class="content">
        <div class="patient-info">
            <span class="data-field"><strong>Nombre y Apellido:</strong> {{ paciente.nombre }} {{ paciente.apellido }}</span>
            <span class="line-box"></span>
        </div>
        <div class="patient-info">
            <span class="data-field"><strong>Cédula:</strong> {{ paciente.numero_documento }}</span>
            <span class="data-field-small"><strong>Edad:</strong> {{ paciente.edad }}</span>
            <span class="line-box"></span>
        </div>
        <div class="patient-info">
            <span class="data-field-small"><strong>Fecha:</strong> {{ historial.fecha|date:"d/m/Y" }}</span>
            <span class="line-box"></span>
        </div>

        <div class="recipe-body">
            <h5>Récipe:</h5>
            
            <div style="padding-left: 10px; flex-grow: 1;">
                {{ recipe.texto_recipe|linebreaksbr }}
            </div>
            
            <div class="signature">
                <div class="line"></div>
                <p>Medico(a) (Nombre/Firma)</p>

            </div>
        </div>
    </div>
    <div class="footer">
        <div class="address">
            <strong>Edif. Unearte</strong><br>
           <strong>Av. México, entre UNEARTE y Teatro Teresa Carreño.</strong>
        </div>
    </div>

</body>
</html>